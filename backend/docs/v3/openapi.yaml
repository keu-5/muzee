openapi: 3.0.1
info:
  contact: {}
  description: This is the API documentation for the Muzee application.
  title: Muzee API
  version: "1.0"
servers:
- url: http://localhost/api
paths:
  /tests:
    get:
      description: Returns all test records
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: "#/components/schemas/internal_interface_handler.TestResponse"
                type: array
          description: OK
        "500":
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
          description: Internal Server Error
      summary: List all tests
      tags:
      - tests
    post:
      description: Creates a test record and returns it
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/internal_interface_handler.TestResponse"
          description: OK
        "500":
          content:
            application/json:
              schema:
                additionalProperties:
                  type: string
                type: object
          description: Internal Server Error
      summary: Create a new test
      tags:
      - tests
  /v1/auth/login:
    post:
      description: "Authenticates user with email and password, returns access and\
        \ refresh tokens"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/internal_interface_handler.LoginRequest"
        description: Email and password
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/internal_interface_handler.LoginResponse"
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Unauthorized
        "429":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Internal Server Error
      summary: User login
      tags:
      - auth
      x-codegen-request-body-name: request
  /v1/auth/logout:
    post:
      description: "Invalidates the refresh token by deleting it from Redis, ending\
        \ the user's session"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/internal_interface_handler.LogoutRequest"
        description: Refresh token
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/internal_interface_handler.LogoutResponse"
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Bad Request
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Internal Server Error
      summary: User logout
      tags:
      - auth
      x-codegen-request-body-name: request
  /v1/auth/refresh:
    post:
      description: Uses a refresh token to generate a new access token and refresh
        token. The old refresh token is invalidated.
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/internal_interface_handler.RefreshTokenRequest"
        description: Refresh token
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/internal_interface_handler.RefreshTokenResponse"
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Bad Request
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Internal Server Error
      summary: Refresh access token
      tags:
      - auth
      x-codegen-request-body-name: request
  /v1/auth/signup/send-code:
    post:
      description: Sends a 6-digit verification code to the email for signup
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/internal_interface_handler.SendCodeRequest"
        description: Email and password
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/internal_interface_handler.SendCodeResponse"
          description: OK
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Bad Request
        "429":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Too Many Requests
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Internal Server Error
      summary: Send verification code
      tags:
      - auth
      x-codegen-request-body-name: request
  /v1/auth/signup/verify-code:
    post:
      description: "Verifies the 6-digit code and creates a user account, returning\
        \ access and refresh tokens"
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/internal_interface_handler.VerifyCodeRequest"
        description: Email and verification code
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/internal_interface_handler.VerifyCodeResponse"
          description: Created
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Bad Request
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Internal Server Error
      summary: Verify code and create account
      tags:
      - auth
      x-codegen-request-body-name: request
  /v1/users/me:
    get:
      description: Returns the current authenticated user's information
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/internal_interface_handler.GetMeResponse"
          description: OK
        "401":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Unauthorized
        "500":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse"
          description: Internal Server Error
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - users
components:
  schemas:
    github_com_keu-5_muzee_backend_internal_helper.ErrorResponse:
      example:
        details:
        - key: ""
        - key: ""
        error: error
        message: message
      properties:
        details:
          items:
            additionalProperties: true
            type: object
          type: array
        error:
          type: string
        message:
          type: string
      type: object
    internal_interface_handler.GetMeResponse:
      example:
        updated_at: updated_at
        created_at: created_at
        id: 0
        email: email
      properties:
        created_at:
          type: string
        email:
          type: string
        id:
          type: integer
        updated_at:
          type: string
      type: object
    internal_interface_handler.LoginRequest:
      properties:
        client_id:
          maxLength: 255
          minLength: 1
          type: string
        email:
          maxLength: 255
          type: string
        password:
          maxLength: 72
          minLength: 8
          type: string
      required:
      - client_id
      - email
      - password
      type: object
    internal_interface_handler.LoginResponse:
      example:
        access_token: access_token
        refresh_token: refresh_token
        message: message
        token_type: token_type
        expires_in: 0
        user:
          created_at: created_at
          id: 6
          email: email
      properties:
        access_token:
          type: string
        expires_in:
          type: integer
        message:
          type: string
        refresh_token:
          type: string
        token_type:
          type: string
        user:
          $ref: "#/components/schemas/internal_interface_handler.UserResponse"
      type: object
    internal_interface_handler.LogoutRequest:
      properties:
        refresh_token:
          type: string
      required:
      - refresh_token
      type: object
    internal_interface_handler.LogoutResponse:
      example:
        message: message
      properties:
        message:
          type: string
      type: object
    internal_interface_handler.RefreshTokenRequest:
      properties:
        client_id:
          maxLength: 255
          minLength: 1
          type: string
        refresh_token:
          type: string
      required:
      - client_id
      - refresh_token
      type: object
    internal_interface_handler.RefreshTokenResponse:
      example:
        access_token: access_token
        refresh_token: refresh_token
        token_type: token_type
        expires_in: 0
      properties:
        access_token:
          type: string
        expires_in:
          type: integer
        refresh_token:
          type: string
        token_type:
          type: string
      type: object
    internal_interface_handler.SendCodeRequest:
      properties:
        email:
          maxLength: 255
          type: string
        password:
          maxLength: 72
          minLength: 8
          type: string
      required:
      - email
      - password
      type: object
    internal_interface_handler.SendCodeResponse:
      example:
        message: message
        expires_in: 0
        email: email
      properties:
        email:
          type: string
        expires_in:
          type: integer
        message:
          type: string
      type: object
    internal_interface_handler.TestResponse:
      example:
        id: 0
      properties:
        id:
          type: integer
      type: object
    internal_interface_handler.UserResponse:
      example:
        created_at: created_at
        id: 6
        email: email
      properties:
        created_at:
          type: string
        email:
          type: string
        id:
          type: integer
      type: object
    internal_interface_handler.VerifyCodeRequest:
      properties:
        client_id:
          maxLength: 255
          minLength: 1
          type: string
        code:
          type: string
        email:
          maxLength: 255
          type: string
      required:
      - client_id
      - code
      - email
      type: object
    internal_interface_handler.VerifyCodeResponse:
      example:
        access_token: access_token
        refresh_token: refresh_token
        message: message
        token_type: token_type
        expires_in: 0
        user:
          created_at: created_at
          id: 6
          email: email
      properties:
        access_token:
          type: string
        expires_in:
          type: integer
        message:
          type: string
        refresh_token:
          type: string
        token_type:
          type: string
        user:
          $ref: "#/components/schemas/internal_interface_handler.UserResponse"
      type: object
  securitySchemes:
    ApiKeyAuth:
      in: header
      name: Authorization
      type: apiKey
x-original-swagger-version: "2.0"
