basePath: /api
definitions:
  github_com_keu-5_muzee_backend_internal_helper.ErrorResponse:
    properties:
      details:
        items:
          additionalProperties: true
          type: object
        type: array
      error:
        type: string
      message:
        type: string
    type: object
  internal_interface_handler.CreateMyProfileRequest:
    properties:
      icon_path:
        maxLength: 255
        type: string
      name:
        maxLength: 100
        minLength: 1
        type: string
      username:
        maxLength: 50
        minLength: 1
        type: string
    required:
    - name
    - username
    type: object
  internal_interface_handler.CreateMyProfileResponse:
    properties:
      message:
        type: string
      user_profile:
        $ref: '#/definitions/internal_interface_handler.UserProfileResponse'
    type: object
  internal_interface_handler.GetMeResponse:
    properties:
      created_at:
        type: string
      email:
        type: string
      id:
        type: integer
      updated_at:
        type: string
    type: object
  internal_interface_handler.LoginRequest:
    properties:
      client_id:
        maxLength: 255
        minLength: 1
        type: string
      email:
        maxLength: 255
        type: string
      password:
        maxLength: 72
        minLength: 8
        type: string
    required:
    - client_id
    - email
    - password
    type: object
  internal_interface_handler.LoginResponse:
    properties:
      access_token:
        type: string
      expires_in:
        type: integer
      message:
        type: string
      refresh_token:
        type: string
      token_type:
        type: string
      user:
        $ref: '#/definitions/internal_interface_handler.UserResponse'
    type: object
  internal_interface_handler.LogoutRequest:
    properties:
      refresh_token:
        type: string
    type: object
  internal_interface_handler.LogoutResponse:
    properties:
      message:
        type: string
    type: object
  internal_interface_handler.RefreshTokenRequest:
    properties:
      client_id:
        maxLength: 255
        minLength: 1
        type: string
      refresh_token:
        type: string
    required:
    - client_id
    type: object
  internal_interface_handler.RefreshTokenResponse:
    properties:
      access_token:
        type: string
      expires_in:
        type: integer
      refresh_token:
        type: string
      token_type:
        type: string
    type: object
  internal_interface_handler.ResendCodeRequest:
    properties:
      email:
        maxLength: 255
        type: string
    required:
    - email
    type: object
  internal_interface_handler.ResendCodeResponse:
    properties:
      email:
        type: string
      expires_in:
        type: integer
      message:
        type: string
    type: object
  internal_interface_handler.SendCodeRequest:
    properties:
      email:
        maxLength: 255
        type: string
      password:
        maxLength: 72
        minLength: 8
        type: string
    required:
    - email
    - password
    type: object
  internal_interface_handler.SendCodeResponse:
    properties:
      email:
        type: string
      expires_in:
        type: integer
      message:
        type: string
    type: object
  internal_interface_handler.TestResponse:
    properties:
      id:
        type: integer
    type: object
  internal_interface_handler.UserProfileResponse:
    properties:
      icon_path:
        type: string
      id:
        type: integer
      name:
        type: string
      username:
        type: string
    type: object
  internal_interface_handler.UserResponse:
    properties:
      created_at:
        type: string
      email:
        type: string
      id:
        type: integer
    type: object
  internal_interface_handler.VerifyCodeRequest:
    properties:
      client_id:
        maxLength: 255
        minLength: 1
        type: string
      code:
        type: string
      email:
        maxLength: 255
        type: string
    required:
    - client_id
    - code
    - email
    type: object
  internal_interface_handler.VerifyCodeResponse:
    properties:
      access_token:
        type: string
      expires_in:
        type: integer
      message:
        type: string
      refresh_token:
        type: string
      token_type:
        type: string
      user:
        $ref: '#/definitions/internal_interface_handler.UserResponse'
    type: object
host: localhost
info:
  contact: {}
  description: This is the API documentation for the Muzee application.
  title: Muzee API
  version: "1.0"
paths:
  /tests:
    get:
      description: Returns all test records
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/internal_interface_handler.TestResponse'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: List all tests
      tags:
      - tests
    post:
      description: Creates a test record and returns it
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_interface_handler.TestResponse'
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      summary: Create a new test
      tags:
      - tests
  /v1/auth/login:
    post:
      consumes:
      - application/json
      description: Authenticates user with email and password. Returns tokens in JSON
        for mobile clients, and sets HttpOnly cookies for web browsers. Requires client_id
        for session tracking.
      parameters:
      - description: Email, password, and client ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interface_handler.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_interface_handler.LoginResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      summary: User login
      tags:
      - auth
  /v1/auth/logout:
    post:
      consumes:
      - application/json
      description: Invalidates the refresh token and ends the user's session. Accepts
        refresh token from either HttpOnly cookie (web) or request body (mobile).
        Also clears cookies for web browsers.
      parameters:
      - description: Refresh token (optional if using cookies)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interface_handler.LogoutRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_interface_handler.LogoutResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      summary: User logout
      tags:
      - auth
  /v1/auth/refresh:
    post:
      consumes:
      - application/json
      description: Generates new access and refresh tokens. Accepts refresh token
        from either HttpOnly cookie (web) or request body (mobile). The old refresh
        token is invalidated. Requires client_id for session validation.
      parameters:
      - description: Refresh token and client ID (refresh_token optional if using
          cookies)
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interface_handler.RefreshTokenRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_interface_handler.RefreshTokenResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      summary: Refresh access token
      tags:
      - auth
  /v1/auth/signup/resend-code:
    post:
      consumes:
      - application/json
      description: Resends a new 6-digit verification code to the email for signup
      parameters:
      - description: Email
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interface_handler.ResendCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_interface_handler.ResendCodeResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      summary: Resend verification code
      tags:
      - auth
  /v1/auth/signup/send-code:
    post:
      consumes:
      - application/json
      description: Sends a 6-digit verification code to the email for signup
      parameters:
      - description: Email and password
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interface_handler.SendCodeRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_interface_handler.SendCodeResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      summary: Send verification code
      tags:
      - auth
  /v1/auth/signup/verify-code:
    post:
      consumes:
      - application/json
      description: Verifies the 6-digit code and creates a user account. Returns tokens
        in JSON for mobile clients, and sets HttpOnly cookies for web browsers. Requires
        client_id for session tracking.
      parameters:
      - description: Email, verification code, and client ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interface_handler.VerifyCodeRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/internal_interface_handler.VerifyCodeResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      summary: Verify code and create account
      tags:
      - auth
  /v1/users/me:
    get:
      consumes:
      - application/json
      description: Returns the current authenticated user's information. Accepts authentication
        via Bearer token (Authorization header) or HttpOnly cookie (access_token).
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/internal_interface_handler.GetMeResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      security:
      - BearerAuth: []
      - CookieAuth: []
      summary: Get current user
      tags:
      - users
  /v1/users/me/profile:
    post:
      consumes:
      - application/json
      description: Creates a user profile for the currently authenticated user. Requires
        authentication via Bearer token (Authorization header) or HttpOnly cookie
        (access_token).
      parameters:
      - description: User profile information
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interface_handler.CreateMyProfileRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/internal_interface_handler.CreateMyProfileResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_keu-5_muzee_backend_internal_helper.ErrorResponse'
      security:
      - BearerAuth: []
      - CookieAuth: []
      summary: Create user profile
      tags:
      - user-profiles
schemes:
- http
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
